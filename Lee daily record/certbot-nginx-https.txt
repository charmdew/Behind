# nginx + certbot https 인증서 발급

sudo snap install certbot --classic

certbot certonly --nginx

이메일 입력 
Terms of Service -> yes
email 수신 여부 -> no
발급 받을 도메인 결정

/etc/nginx/sites-available/{도메인}.conf 변경

	```
	server {
    listen 80;    
    
    server_name i8a404.p.ssafy.io;
    
	location / {
        return 301 https://i8a404.p.ssafy.io$request_uri;
    }
}

	server {
        listen 443 ssl;    #추가

        server_name i8a404.p.ssafy.io www.i8a404.p.ssafy.io;

        access_log /var/log/nginx/proxy/access.log;
        error_log /var/log/nginx/proxy/error.log;

        ssl_certificate     /etc/letsencrypt/live/{도메인 이름}/fullchain.pem;   #추가
        ssl_certificate_key /etc/letsencrypt/live/{도메인 이름}/privkey.pem;   #추가

        location / {
                include /etc/nginx/proxy_params;
                proxy_pass http://localhost:3000/;
           	}

        location /api/ {
                include /etc/nginx/proxy_params;
                proxy_pass http://localhost:8080/;
	}
        }

	```





