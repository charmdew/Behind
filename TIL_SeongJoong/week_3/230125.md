# 230125 기록

#### 1. Git/Github 관련 개인 학습을 진행함. ("Do it! 지옥에서 온 문서 관리자 깃 & 깃허브 입문" 참고)

##### 1) 깃으로 버전 관리하기

- 깃 환경 설정
  - 깃은 버전을 저장할 때마다 사용자 정보도 함께 저장하므로 입력해 줘야 함.

```bash
# 사용자 이름, 이메일 주소 저장
$ git config user.name "이름"
$ git config user.email "메일 주소"
# --global 옵션을 추가하면 현재 컴퓨터의 모든 저장소에서 같은 사용자 정보를 사용함.
```

- 깃 저장소 만들고, 버전 관리하기

```bash
$ git init # 현재 디렉터리에서 깃을 사용할 수 있도록 초기화
$ git init <디렉터리 이름> # 새 디렉터리 생성 + 저장소 초기화

# 깃 상태 확인
$ git status

# 스테이징 / 스테이지에 올리기
$ git add <파일>

# 스테이징한 파일 저장소에 추가 (커밋)
$ git commit -m "메시지"

# 커밋 메시지 수정하기
$ git commit --amend
```

- 커밋 내용 확인하기

```bash
$ git log # 커밋 기록
$ git log --stat # 커밋 관련 정보 포함
$ git log --oneline # 로그를 한 줄로 약식으로 보여줌

# 변경 사항 확인 (수정한 파일이 저장소에 있는 최신 버전과 어떻게 다른지)
$ git diff
```

- 작업 되돌리기

```bash
# 작업 트리에서 수정한 파일 되돌리기
$ git restore <파일>

# 스테이징 취소
$ git restore --staged <파일>

# 최신 커밋 취소
$ git reset HEAD^ # 스테이지에서도 내려감
$ git reset --soft HEAD^ # staged 상태로 보관

# 특정 커밋으로 되돌리기 → 되돌아갈 해시 지정
$ git reset --hard <커밋 해시>

# 커밋 기록 남긴 채 해당 커밋의 변경 이력 취소 → 취소할 해시 지정
$ git revert <커밋 해시>
```

---

##### 2) 깃과 브랜치

- 새 브랜치 만들기
  - 분기한 후에 main 브랜치에 추가된 커밋은 다른 브랜치에 영향 X.

```bash
# 브랜치 확인 → * 표시된 것이 현재 작업 중인 브랜치
$ git branch

# 브랜치 생성
$ git branch <브랜치 이름>

# 브랜치 전환
$ git switch <브랜치 이름>

# 브랜치-커밋 관계를 그래프 형태로 확인
$ git log --oneline --branches --graph

# 브랜치 사이의 차이점 확인 %rarr; 1에는 없고 2에만 있는 커밋 보여줌.
$ git log <브랜치1>..<브랜치2>
```

- 브랜치 병합하기 (merge)
  - 분기(branch)했던 브랜치에서 원하는 작업을 끝내고 main 브랜치에 합치는 것 &rarr; 양쪽 브랜치의 모든 변경 사항이 포함된 **새로운 버전이 추가됨.**
  - 즉, 기본 파일은 main에 그대로 둔 상태에서 새로운 브랜치를 분기한 후 수정이나 추가 작업을 하고, 새로운 내용을 main 브랜치와 병합하는 것.
  - 서로 다른 브랜치에서 한 문서의 **다른 부분**을 수정 &rarr; 자동으로 합쳐주는 기능이 있음.
  - 서로 다른 브랜치에서 한 문서의 **같은 부분**을 수정 &rarr; 충돌이 발생했다는 경고 메시지를 띄워줌 &rarr; 사용자가 직접 수정해야 함.

```bash
# 브랜치 가져와서 현재 작업 중인 브랜치에 병합
$ git merge <브랜치 이름>
```

- 병합 끝난 브랜치 삭제하기
  - 저장소의 기본 브랜치인 main에서 입력해야 함.

```bash
git branch -d <브랜치 이름> # 병합한 브랜치 삭제 → 안 했으면 오류 발생.
git branch -D <브랜치 이름> # 병합하지 않은 브랜치 강제 삭제
```

- cherry-pick 병합
  - 분기 branch 전체가 아니라 특정 버전의 변경 내용만 합치려고 할 때 사용하는 기능.
  - **새로운 버전이 만들어지지 않고,** 해당 버전이 합쳐짐.

```bash
$ git cherry-pick <체리픽할 해시>
```

---

##### 3) 깃허브 시작하기

- 지역 저장소와 원격 저장소
  
  - 지역 저장소 : 사용자 컴퓨터에 있는 저장소
  - 원격 저장소 : 깃허브에 있는 저장소
  - push : 지역 저장소에서 원격 저장소로 커밋을 등록하는 것.
  - pull : 원격 저장소의 변경 사항을 지역 저장소로 내려받는 것.
  - 동기화 : 지역 저장소와 원격 저장소를 항상 같게 유지하는 것.

- 원격 저장소에 연결하기

```bash
# 지역 저장소를 원격 저장소에 연결
$ git remote add origin <원격 저장소 HTTPS 주소> # origin : 기본 원격 저장소

# 연결 확인
$ git remote -v
```

- 원격 저장소에 파일 올리기 (push)
  - 지역 저장소에 새로운 커밋을 만든 후 원격 저장소로 푸시.

```bash
# 지역 저장소의 브랜치를 origin(원격 저장소)의 main 브랜치로 푸시
$ git push -u origin main 
# -u 옵션은 처음 한 번만 사용하면 됨.
$ git push
```

- 원격 저장소에서 커밋 내려받기 (pull)

```bash
# 원격 저장소를 origin으로 지정했고, 지역 저장소의 기본 브랜치인 main으로 풀
$ git pull origin main
# 기본 저장소끼리인 경우
$ git pull
```

- 깃허브 SSH 원격 접속
  - SSH (secure shell) : 보안이 강화된 안전한 방법으로 정보를 교환하는 방식.
  - 프라이빗 키 + 퍼블릭 키 한 쌍으로 묶어서 컴퓨터를 인증함.
  - 키를 사용해 현재 사용하는 기기 자체를 깃허브에 인증하는 방식.
  - 자동 로그인 기능을 통해 매번 인증해야 하는 번거로움을 줄일 수 있음.

```bash
# SSH 키 생성
$ ssh-keygen # id_rsa : 프라이빗 / id_rsa.pub : 퍼블릭

# 깃허브에 퍼블릭 키 올리기
$ clip < <경로 + 퍼블릭 키> # 퍼블릭 키를 클립보드로 복사
# 복사한 SSH 키를 깃허브 웹 브라우저에서 추가.

# 이후 HTTPS와 동일한 방법으로 원격 저장소 연결.
```